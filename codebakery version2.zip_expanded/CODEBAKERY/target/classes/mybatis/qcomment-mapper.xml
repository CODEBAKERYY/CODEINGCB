<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<<<<<<< HEAD
<mapper namespace="qcomment">

	<resultMap type="QnACommentDto" id="QnACommentMap">
		<result property="comment_No" column="QCOMMENT_NO" />
		<result property="question_No" column="QUESTION_NO" />
		<result property="answer_No" column="ANSWER_NO" />
		<result property="comment_Content" column="QCOMMENT_CONTENT" />
		<result property="comment_Date" column="QCOMMENT_DATE" />
		<result property="group_no" column="GROUP_SQ" />
		<result property="reply_no" column="REPLY_ID" />
		<result property="user_Id" column="USER_ID" />
		<result property="nuser_Id" column="NUSER_ID" />
	</resultMap>

	<select id="selectList" resultMap="QnACommentMap">
		SELECT *
		FROM QNA_COMMENT
		WHERE
		QUESTION_NO=#{question_No}
		ORDER BY QCOMMENT_NO DESC
	</select>

	<insert id="insertQuestion" parameterType="QnACommentDto">
		INSERT INTO
		QNA_COMMENT
		VALUES(QCOMMENTSEQ.NEXTVAL, #{question_No}, 0,
		#{comment_Content}, SYSDATE, 0, NULL, #{user_Id},
		NULL)
	</insert>

	<delete id="delete" parameterType="int">
		DELETE FROM QNA_COMMENT
		WHERE
		QCOMMENT_NO=#{qcomment_No}
	</delete>

	<update id="update" parameterType="QnACommentDto">
		UPDATE QNA_COMMENT
		SET
		COMMNET_CONTENT = #{comment_Content}, COMMENT_DATE=NOW()
		WHERE
		COMMENT_NO = #{comment_No}
	</update>
</mapper>
=======
  
  <mapper namespace="qcomment">
  	<resultMap type="QnACommentDto" id="QnACommentMap">
		<result property="comment_No" column="QCOMMENT_NO" />  	
  		<result property="question_No" column="QUESTION_NO" />
  		<result property="comment_Content" column="QCOMMENT_CONTENT" />
  		<result property="comment_Date" column="QCOMMENT_DATE" />
  		<result property="group_Id" column="GROUP_ID" />
  		<result property="parent_No" column="PARENT_NO" />
  		<result property="depth" column="DEPTH" />
  		<result property="order_No" column="ORDER_NO" />
  		<result property="user_Id" column="USER_ID" />
  		<result property="nuser_Id" column="NUSER_ID" />
  	</resultMap>
  	
  	<select id="selectList" resultMap="QnACommentMap">
  		SELECT * 
  		FROM QNA_COMMENT
  		WHERE QUESTION_NO=#{question_No}
  		ORDER BY GROUP_ID ASC, QCOMMENT_NO ASC, PARENT_NO DESC
  	</select>
  	
  	<insert id="insertQuestion" parameterType="QnACommentDto">
  		INSERT INTO QNA_COMMENT
  		VALUES(QCOMMENTSEQ.NEXTVAL, #{question_No}, #{comment_Content}, SYSDATE, QCOMMENTGROUPSEQ.NEXTVAL, 0, 0, 0, #{user_Id}, NULL)
  	</insert>
  	
  	<delete id="delete" parameterType="int">
  		DELETE FROM QNA_COMMENT
  		WHERE QCOMMENT_NO=#{comment_No}
  	</delete>
  	
  	<update id="update" parameterType="QnACommentDto">
  		UPDATE QNA_COMMENT
  		SET QCOMMENT_CONTENT = #{comment_Content}
  		WHERE QCOMMENT_NO = #{comment_No}
  	</update>
  
  	<insert id="insertReply" parameterType="QnACommentDto">
  		INSERT INTO QNA_COMMENT
  		VALUES(QCOMMENTSEQ.NEXTVAL, #{question_No}, #{comment_Content}, SYSDATE, #{group_Id}, #{comment_No}, #{depth}+1, 0, #{user_Id}, NULL)
    </insert>
  </mapper>
>>>>>>> stella
